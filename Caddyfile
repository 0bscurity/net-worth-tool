{
    # fallback global email for all site blocks
    email {env.ACME_EMAIL}
}

myfinancialtools.info {
    # Enable gzip compression
    encode gzip

    @api path /api/*
    reverse_proxy @api localhost:5000

    # Serve the React app
    root * /home/deployer/app/net-worth-tool/frontend/dist

    # SPA fallback to index.html
    try_files {path} {path}/ /index.html

    # Static file server
    file_server

    # Optional: log requests
    log {
        output file /var/log/caddy/myfinancialtools.access.log {
            roll_size 10mb
            roll_keep 5
            roll_keep_for 72h
        }
    }
}
